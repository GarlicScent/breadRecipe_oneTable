<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>ONE TABLE</title>

    <!-- jquery -->
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>
    <!--  -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.27.2/axios.min.js"
      integrity="sha512-odNmoc1XJy5x1TMVMdC7EMs3IVdItLPlCeL5vSUPN2llYKMJ2eByTTAIiiuqLg+GdNr9hF6z81p27DArRFKT7A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <!-- 네브바 fontawesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
      integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/static/css/navbar.css" />
    <link rel="stylesheet" href="/static/css/footer.css" />
    <!-- 부트스트랩 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
    <!-- 슬라이드 라이브러리 CDN -->
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"
    />
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"
    ></script>
    <!-- axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn-uicons.flaticon.com/uicons-regular-rounded/css/uicons-regular-rounded.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
      integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <style>
      @import url(//fonts.googleapis.com/earlyaccess/notosanskr.css);

      body {
        font-family: var(--sub-font-family);
        background-color: rgb(236, 236, 236);
      }
      .register-all {
        background-color: white;
        /* border: 1px dotted blue; */
        width: 80vw;
        margin: 20px auto;
        padding: 10px;
      }
      .register {
        border: 1px dotted red;
      }
      .register > h3 {
        padding: 10px;
      }
      .img-register > img {
        width: 150px;
        height: 150px;
        margin: 10px;
      }

      .register-inform-child > div > div {
        display: inline-block;
        margin: 10px 16px;
      }
      .register-inform {
        display: flex;
        justify-content: center;
      }
      /* 등록버튼 */
      .register-button {
        text-align: center;
      }

      .register-button > button {
        width: 200px;
        height: 50px;
        background-color: #aa8a72;
        border: 0px;
        border-radius: 10px;
        color: white;
        margin: 30px 0px;
      }
      /* 파일업로드 인풋 */
      #file {
        display: none;
      }
      label[for="file"] {
        text-align: center;
        background-color: rgb(235, 235, 235);
        width: 200px;
        height: 200px;
        border-radius: 20px;
      }
      label[for="file"] > i {
        font-size: 50px;
      }
    </style>
  </head>

  <body>
    <%-include("navbar.ejs")%>

    <div class="register-all">
      <div class="register">
        <h3>클래스 등록</h3>
        <hr />
        <div class="register-inform">
          <form class="register-inform-child" id="registerForm">
            <div>
              <div>클래스 제목</div>
              <input type="text" name="name" />
            </div>
            <div>
              <div>클래스 설명</div>
              <input type="text" name="intro" />
            </div>
            <div>
              <div>클래스 금액</div>
              <input type="text" name="price" />원
            </div>
            <div>
              <div>클래스 시간</div>
              <input type="text" name="hour" />분
            </div>
            <div>
              <div>클래스 날짜</div>
              <input type="date" name="date" />
            </div>
            <div>
              <div>클래스 정원</div>
              <input type="text" name="totalNumber" />명
            </div>
          </form>
          <form method="post" enctype="multipart/form-data">
            <label class="input-file-button" for="file"
              ><i class="fa-solid fa-camera"></i> <br />
              클래스 대표사진을 <br />선택하세요.</label
            >
            <input type="file" name="courseImage" id="file" />
          </form>
        </div>
      </div>
      <div class="register-button">
        <button onclick="register();">등록</button>
        <button>취소</button>
      </div>
    </div>
    <%-include("footer.ejs")%>

    <script>
      function register() {
        let form = document.getElementById("registerForm");
        const formData = new FormData();
        const file = document.getElementById("file");
        formData.append("courseImage", file.files[0]);
        formData.append("name", form.name.value);
        formData.append("intro", form.intro.value);
        formData.append("price", form.price.value);
        formData.append("hour", form.hour.value);
        formData.append("date", form.date.value);
        formData.append("totalNumber", form.totalNumber.value);

        axios({
          headers: {
            "Content-Type": "multipart/form-data",
          },
          method: "post",
          url: "http://localhost:8000/course/register",
          data: formData,
        }).then((response) => {
          document.location.href = "/course";
          console.log(response.data);
        });
      }
    </script>
  </body>
</html>
